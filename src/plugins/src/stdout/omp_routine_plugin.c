/** THIS FILE HAS BEEN AUTOMATICALLY GENERATED BY THE GILDA TOOL.
 * DO NOT MODIFY UNLESS YOU KNOW WHAT YOU ARE DOING.
 * ANY CHANGES MAY BE OVERWRITTEN BY SUBSEQUENT RUNS OF GILDA. 
 */
 
#include <stdio.h>
#include <ratelprof.h>
#include "omp_routine_plugin.h"

void on_enter_omp_routine_callback(ratelprof_domain_t domain, ratelprof_api_id_t id, void* user_activity)
{
    ratelprof_api_activity_t* activity = (ratelprof_api_activity_t*)user_activity;
    get_omp_routine_pointed_args_for(id, activity->args, 1);
    activity->phase = ratelprof_get_current_phase();
    activity->domain = domain;
    get_correlation_id(&activity->corr_id);
    get_id(&activity->id);
    activity->funid = id;
}

void on_exit_omp_routine_callback(ratelprof_domain_t domain, ratelprof_api_id_t id, void* user_activity)
{
    ratelprof_api_activity_t* activity = (ratelprof_api_activity_t*)user_activity;
    get_omp_routine_pointed_args_for(id, activity->args, 0);
    activity->pid = get_pid();
    activity->tid = get_tid();
    printf("-----------\n");
    printf("PHASE:%d : %s | ID: %lu | CID: %lu\n", activity->phase, get_omp_routine_funame_by_id(activity->funid), activity->id, activity->corr_id);
    ratelprof_get_and_print_location(activity->return_address);
    process_omp_routine_args_for(activity->funid, activity->args, NULL);
    pop_id();
}

void process_omp_routine_args_for(omp_routine_api_id_t funid, const void* func_args, void* user_args)
{
    switch(funid) {
		#if HAVE_omp_target_memset
		case OMP_ROUTINE_API_ID_omp_target_memset : {
			//	void * ptr (void *);
			//	int value (int);
			//	size_t size (unsigned long);
			//	int device_num (int);
			//	void * retval (void *);
			args_omp_target_memset_t* args = (args_omp_target_memset_t*) func_args;
			printf("\tvoid * ptr = %p", args->ptr);
			printf("\n");
			printf("\tint value = %d\n", args->value);
			printf("\tsize_t size = %lu\n", args->size);
			printf("\tint device_num = %d\n", args->device_num);
			printf("\tvoid * retval = %p", args->retval);
			printf("\n");
			break;

		}
		#endif
		#if HAVE_omp_target_memcpy_async
		case OMP_ROUTINE_API_ID_omp_target_memcpy_async : {
			//	void * dst (void *);
			//	const void * src (const void *);
			//	size_t size (unsigned long);
			//	size_t dst_offset (unsigned long);
			//	size_t src_offset (unsigned long);
			//	int dst_device_num (int);
			//	int src_device_num (int);
			//	int async_depend_info (int);
			//	omp_depend_t * depend (void **);
			//	int retval (int);
			args_omp_target_memcpy_async_t* args = (args_omp_target_memcpy_async_t*) func_args;
			printf("\tvoid * dst = %p", args->dst);
			printf("\n");
			printf("\tconst void * src = %p", args->src);
			printf("\n");
			printf("\tsize_t size = %lu\n", args->size);
			printf("\tsize_t dst_offset = %lu\n", args->dst_offset);
			printf("\tsize_t src_offset = %lu\n", args->src_offset);
			printf("\tint dst_device_num = %d\n", args->dst_device_num);
			printf("\tint src_device_num = %d\n", args->src_device_num);
			printf("\tint async_depend_info = %d\n", args->async_depend_info);
			printf("\tomp_depend_t * depend = %p", args->depend);
			if (args->depend != NULL) {
				printf("-> %p", args->depend__ref.ptr1);
				printf("\n");
			} else { printf("\n"); };
			printf("\tint retval = %d\n", args->retval);
			break;

		}
		#endif
		#if HAVE_omp_target_memcpy_rect_async
		case OMP_ROUTINE_API_ID_omp_target_memcpy_rect_async : {
			//	void * dst (void *);
			//	const void * src (const void *);
			//	size_t element_size (unsigned long);
			//	int num_dims (int);
			//	const size_t * volume (const unsigned long *);
			//	const size_t * dst_offsets (const unsigned long *);
			//	const size_t * src_offsets (const unsigned long *);
			//	const size_t * dst_dimensions (const unsigned long *);
			//	const size_t * src_dimensions (const unsigned long *);
			//	int dst_device_num (int);
			//	int src_device_num (int);
			//	int depobj_count (int);
			//	omp_depend_t * depobj_list (void **);
			//	int retval (int);
			args_omp_target_memcpy_rect_async_t* args = (args_omp_target_memcpy_rect_async_t*) func_args;
			printf("\tvoid * dst = %p", args->dst);
			printf("\n");
			printf("\tconst void * src = %p", args->src);
			printf("\n");
			printf("\tsize_t element_size = %lu\n", args->element_size);
			printf("\tint num_dims = %d\n", args->num_dims);
			printf("\tconst size_t * volume = %p", args->volume);
			if (args->volume != NULL) {
				printf(" -> %lu\n", args->volume__ref.val);
			} else { printf("\n"); };
			printf("\tconst size_t * dst_offsets = %p", args->dst_offsets);
			if (args->dst_offsets != NULL) {
				printf(" -> %lu\n", args->dst_offsets__ref.val);
			} else { printf("\n"); };
			printf("\tconst size_t * src_offsets = %p", args->src_offsets);
			if (args->src_offsets != NULL) {
				printf(" -> %lu\n", args->src_offsets__ref.val);
			} else { printf("\n"); };
			printf("\tconst size_t * dst_dimensions = %p", args->dst_dimensions);
			if (args->dst_dimensions != NULL) {
				printf(" -> %lu\n", args->dst_dimensions__ref.val);
			} else { printf("\n"); };
			printf("\tconst size_t * src_dimensions = %p", args->src_dimensions);
			if (args->src_dimensions != NULL) {
				printf(" -> %lu\n", args->src_dimensions__ref.val);
			} else { printf("\n"); };
			printf("\tint dst_device_num = %d\n", args->dst_device_num);
			printf("\tint src_device_num = %d\n", args->src_device_num);
			printf("\tint depobj_count = %d\n", args->depobj_count);
			printf("\tomp_depend_t * depobj_list = %p", args->depobj_list);
			if (args->depobj_list != NULL) {
				printf("-> %p", args->depobj_list__ref.ptr1);
				printf("\n");
			} else { printf("\n"); };
			printf("\tint retval = %d\n", args->retval);
			break;

		}
		#endif
		#if HAVE_omp_target_alloc
		case OMP_ROUTINE_API_ID_omp_target_alloc : {
			//	size_t size (unsigned long);
			//	int device_num (int);
			//	void * retval (void *);
			args_omp_target_alloc_t* args = (args_omp_target_alloc_t*) func_args;
			printf("\tsize_t size = %lu\n", args->size);
			printf("\tint device_num = %d\n", args->device_num);
			printf("\tvoid * retval = %p", args->retval);
			printf("\n");
			break;

		}
		#endif
		#if HAVE_omp_target_free
		case OMP_ROUTINE_API_ID_omp_target_free : {
			//	void * device_ptr (void *);
			//	int device_num (int);
			args_omp_target_free_t* args = (args_omp_target_free_t*) func_args;
			printf("\tvoid * device_ptr = %p", args->device_ptr);
			printf("\n");
			printf("\tint device_num = %d\n", args->device_num);
			break;

		}
		#endif
		#if HAVE_omp_target_memcpy_rect
		case OMP_ROUTINE_API_ID_omp_target_memcpy_rect : {
			//	void * dst (void *);
			//	const void * src (const void *);
			//	size_t element_size (unsigned long);
			//	int num_dims (int);
			//	const size_t * volume (const unsigned long *);
			//	const size_t * dst_offsets (const unsigned long *);
			//	const size_t * src_offsets (const unsigned long *);
			//	const size_t * dst_dimensions (const unsigned long *);
			//	const size_t * src_dimensions (const unsigned long *);
			//	int dst_device_num (int);
			//	int src_device_num (int);
			//	int retval (int);
			args_omp_target_memcpy_rect_t* args = (args_omp_target_memcpy_rect_t*) func_args;
			printf("\tvoid * dst = %p", args->dst);
			printf("\n");
			printf("\tconst void * src = %p", args->src);
			printf("\n");
			printf("\tsize_t element_size = %lu\n", args->element_size);
			printf("\tint num_dims = %d\n", args->num_dims);
			printf("\tconst size_t * volume = %p", args->volume);
			if (args->volume != NULL) {
				printf(" -> %lu\n", args->volume__ref.val);
			} else { printf("\n"); };
			printf("\tconst size_t * dst_offsets = %p", args->dst_offsets);
			if (args->dst_offsets != NULL) {
				printf(" -> %lu\n", args->dst_offsets__ref.val);
			} else { printf("\n"); };
			printf("\tconst size_t * src_offsets = %p", args->src_offsets);
			if (args->src_offsets != NULL) {
				printf(" -> %lu\n", args->src_offsets__ref.val);
			} else { printf("\n"); };
			printf("\tconst size_t * dst_dimensions = %p", args->dst_dimensions);
			if (args->dst_dimensions != NULL) {
				printf(" -> %lu\n", args->dst_dimensions__ref.val);
			} else { printf("\n"); };
			printf("\tconst size_t * src_dimensions = %p", args->src_dimensions);
			if (args->src_dimensions != NULL) {
				printf(" -> %lu\n", args->src_dimensions__ref.val);
			} else { printf("\n"); };
			printf("\tint dst_device_num = %d\n", args->dst_device_num);
			printf("\tint src_device_num = %d\n", args->src_device_num);
			printf("\tint retval = %d\n", args->retval);
			break;

		}
		#endif
		#if HAVE_omp_target_disassociate_ptr
		case OMP_ROUTINE_API_ID_omp_target_disassociate_ptr : {
			//	const void * host_ptr (const void *);
			//	int device_num (int);
			//	int retval (int);
			args_omp_target_disassociate_ptr_t* args = (args_omp_target_disassociate_ptr_t*) func_args;
			printf("\tconst void * host_ptr = %p", args->host_ptr);
			printf("\n");
			printf("\tint device_num = %d\n", args->device_num);
			printf("\tint retval = %d\n", args->retval);
			break;

		}
		#endif
		#if HAVE_omp_target_memcpy
		case OMP_ROUTINE_API_ID_omp_target_memcpy : {
			//	void * dst (void *);
			//	const void * src (const void *);
			//	size_t size (unsigned long);
			//	size_t dst_offset (unsigned long);
			//	size_t src_offset (unsigned long);
			//	int dst_device_num (int);
			//	int src_device_num (int);
			//	int retval (int);
			args_omp_target_memcpy_t* args = (args_omp_target_memcpy_t*) func_args;
			printf("\tvoid * dst = %p", args->dst);
			printf("\n");
			printf("\tconst void * src = %p", args->src);
			printf("\n");
			printf("\tsize_t size = %lu\n", args->size);
			printf("\tsize_t dst_offset = %lu\n", args->dst_offset);
			printf("\tsize_t src_offset = %lu\n", args->src_offset);
			printf("\tint dst_device_num = %d\n", args->dst_device_num);
			printf("\tint src_device_num = %d\n", args->src_device_num);
			printf("\tint retval = %d\n", args->retval);
			break;

		}
		#endif
		#if HAVE_omp_target_memset_async
		case OMP_ROUTINE_API_ID_omp_target_memset_async : {
			//	void * ptr (void *);
			//	int value (int);
			//	size_t size (unsigned long);
			//	int device_num (int);
			//	int async_depend_info (int);
			//	omp_depend_t * depend (void **);
			//	void * retval (void *);
			args_omp_target_memset_async_t* args = (args_omp_target_memset_async_t*) func_args;
			printf("\tvoid * ptr = %p", args->ptr);
			printf("\n");
			printf("\tint value = %d\n", args->value);
			printf("\tsize_t size = %lu\n", args->size);
			printf("\tint device_num = %d\n", args->device_num);
			printf("\tint async_depend_info = %d\n", args->async_depend_info);
			printf("\tomp_depend_t * depend = %p", args->depend);
			if (args->depend != NULL) {
				printf("-> %p", args->depend__ref.ptr1);
				printf("\n");
			} else { printf("\n"); };
			printf("\tvoid * retval = %p", args->retval);
			printf("\n");
			break;

		}
		#endif
		#if HAVE_omp_target_is_present
		case OMP_ROUTINE_API_ID_omp_target_is_present : {
			//	const void * host_ptr (const void *);
			//	int device_num (int);
			//	int retval (int);
			args_omp_target_is_present_t* args = (args_omp_target_is_present_t*) func_args;
			printf("\tconst void * host_ptr = %p", args->host_ptr);
			printf("\n");
			printf("\tint device_num = %d\n", args->device_num);
			printf("\tint retval = %d\n", args->retval);
			break;

		}
		#endif
		#if HAVE_omp_target_associate_ptr
		case OMP_ROUTINE_API_ID_omp_target_associate_ptr : {
			//	const void * host_ptr (const void *);
			//	const void * device_ptr (const void *);
			//	size_t size (unsigned long);
			//	size_t alignment (unsigned long);
			//	int device_num (int);
			//	int retval (int);
			args_omp_target_associate_ptr_t* args = (args_omp_target_associate_ptr_t*) func_args;
			printf("\tconst void * host_ptr = %p", args->host_ptr);
			printf("\n");
			printf("\tconst void * device_ptr = %p", args->device_ptr);
			printf("\n");
			printf("\tsize_t size = %lu\n", args->size);
			printf("\tsize_t alignment = %lu\n", args->alignment);
			printf("\tint device_num = %d\n", args->device_num);
			printf("\tint retval = %d\n", args->retval);
			break;

		}
		#endif
		#if HAVE_omp_get_initial_device
		case OMP_ROUTINE_API_ID_omp_get_initial_device : {
			//	int retval (int);
			args_omp_get_initial_device_t* args = (args_omp_get_initial_device_t*) func_args;
			printf("\tint retval = %d\n", args->retval);
			break;

		}
		#endif
		#if HAVE_llvm_omp_target_dynamic_shared_alloc
		case OMP_ROUTINE_API_ID_llvm_omp_target_dynamic_shared_alloc : {
			//	void * retval (void *);
			args_llvm_omp_target_dynamic_shared_alloc_t* args = (args_llvm_omp_target_dynamic_shared_alloc_t*) func_args;
			printf("\tvoid * retval = %p", args->retval);
			printf("\n");
			break;

		}
		#endif
		#if HAVE_omp_get_interop_int
		case OMP_ROUTINE_API_ID_omp_get_interop_int : {
			//	const omp_interop_t interop (const void *);
			//	omp_interop_property_t prop (enum omp_interop_property);
			//	int * exists (int *);
			//	omp_intptr_t retval (long);
			args_omp_get_interop_int_t* args = (args_omp_get_interop_int_t*) func_args;
			printf("\tconst omp_interop_t interop = %p", args->interop);
			printf("\n");
			printf("\tomp_interop_property_t prop = %d\n", args->prop);
			printf("\tint * exists = %p", args->exists);
			if (args->exists != NULL) {
				printf(" -> %d\n", args->exists__ref.val);
			} else { printf("\n"); };
			printf("\tomp_intptr_t retval = %ld\n", args->retval);
			break;

		}
		#endif
		#if HAVE_omp_get_interop_name
		case OMP_ROUTINE_API_ID_omp_get_interop_name : {
			//	const omp_interop_t interop (const void *);
			//	omp_interop_property_t prop (enum omp_interop_property);
			//	const char * retval (const char *);
			args_omp_get_interop_name_t* args = (args_omp_get_interop_name_t*) func_args;
			printf("\tconst omp_interop_t interop = %p", args->interop);
			printf("\n");
			printf("\tomp_interop_property_t prop = %d\n", args->prop);
			printf("\tconst char * retval = %p", args->retval);
			if (args->retval != NULL) {
				printf(" -> %s\n", args->retval__ref.val);
			} else { printf("\n"); };
			break;

		}
		#endif
		#if HAVE_omp_get_interop_ptr
		case OMP_ROUTINE_API_ID_omp_get_interop_ptr : {
			//	const omp_interop_t interop (const void *);
			//	omp_interop_property_t prop (enum omp_interop_property);
			//	int * exists (int *);
			//	void * retval (void *);
			args_omp_get_interop_ptr_t* args = (args_omp_get_interop_ptr_t*) func_args;
			printf("\tconst omp_interop_t interop = %p", args->interop);
			printf("\n");
			printf("\tomp_interop_property_t prop = %d\n", args->prop);
			printf("\tint * exists = %p", args->exists);
			if (args->exists != NULL) {
				printf(" -> %d\n", args->exists__ref.val);
			} else { printf("\n"); };
			printf("\tvoid * retval = %p", args->retval);
			printf("\n");
			break;

		}
		#endif
		#if HAVE_omp_get_interop_str
		case OMP_ROUTINE_API_ID_omp_get_interop_str : {
			//	const omp_interop_t interop (const void *);
			//	omp_interop_property_t prop (enum omp_interop_property);
			//	int * exists (int *);
			//	const char * retval (const char *);
			args_omp_get_interop_str_t* args = (args_omp_get_interop_str_t*) func_args;
			printf("\tconst omp_interop_t interop = %p", args->interop);
			printf("\n");
			printf("\tomp_interop_property_t prop = %d\n", args->prop);
			printf("\tint * exists = %p", args->exists);
			if (args->exists != NULL) {
				printf(" -> %d\n", args->exists__ref.val);
			} else { printf("\n"); };
			printf("\tconst char * retval = %p", args->retval);
			if (args->retval != NULL) {
				printf(" -> %s\n", args->retval__ref.val);
			} else { printf("\n"); };
			break;

		}
		#endif
		#if HAVE_omp_get_interop_type_desc
		case OMP_ROUTINE_API_ID_omp_get_interop_type_desc : {
			//	const omp_interop_t interop (const void *);
			//	omp_interop_property_t prop (enum omp_interop_property);
			//	const char * retval (const char *);
			args_omp_get_interop_type_desc_t* args = (args_omp_get_interop_type_desc_t*) func_args;
			printf("\tconst omp_interop_t interop = %p", args->interop);
			printf("\n");
			printf("\tomp_interop_property_t prop = %d\n", args->prop);
			printf("\tconst char * retval = %p", args->retval);
			if (args->retval != NULL) {
				printf(" -> %s\n", args->retval__ref.val);
			} else { printf("\n"); };
			break;

		}
		#endif
		#if HAVE_omp_get_mapped_ptr
		case OMP_ROUTINE_API_ID_omp_get_mapped_ptr : {
			//	const void * ptr (const void *);
			//	int device_num (int);
			//	void * retval (void *);
			args_omp_get_mapped_ptr_t* args = (args_omp_get_mapped_ptr_t*) func_args;
			printf("\tconst void * ptr = %p", args->ptr);
			printf("\n");
			printf("\tint device_num = %d\n", args->device_num);
			printf("\tvoid * retval = %p", args->retval);
			printf("\n");
			break;

		}
		#endif
		#if HAVE_omp_get_num_devices
		case OMP_ROUTINE_API_ID_omp_get_num_devices : {
			//	int retval (int);
			args_omp_get_num_devices_t* args = (args_omp_get_num_devices_t*) func_args;
			printf("\tint retval = %d\n", args->retval);
			break;

		}
		#endif
		#if HAVE_omp_is_coarse_grain_mem_region
		case OMP_ROUTINE_API_ID_omp_is_coarse_grain_mem_region : {
			//	void * ptr (void *);
			//	size_t size (unsigned long);
			//	int retval (int);
			args_omp_is_coarse_grain_mem_region_t* args = (args_omp_is_coarse_grain_mem_region_t*) func_args;
			printf("\tvoid * ptr = %p", args->ptr);
			printf("\n");
			printf("\tsize_t size = %lu\n", args->size);
			printf("\tint retval = %d\n", args->retval);
			break;

		}
		#endif
        default : break;
    }
}